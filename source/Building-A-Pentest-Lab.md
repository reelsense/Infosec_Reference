## Building a Pentest Lab

### ToC

* [General](#general)
* [VMs Designed to be Attacked](#vm)
* [Building a Pentest Lab](#building)

### General

* [Install AD DS using Powerhsell](https://docs.microsoft.com/en-us/windows-server/identity/ad-ds/deploy/install-active-directory-domain-services--level-100-#BKMK_PS)
* [Pentest Environment Deployer](https://github.com/Sliim/pentest-env)

  * This repo provides an easy way to deploy a clean and customized pentesting
    environment with Kali linux using vagrant and virtualbox.

* [DumpsterFire](https://github.com/TryCatchHCF/DumpsterFire)

  * [Slides](https://github.com/TryCatchHCF/DumpsterFire/raw/master/CactusCon_2017_Presentation/DumpsterFire_CactusCon_2017_Slides.pdf)
  * The DumpsterFire Toolset is a modular, menu-driven, cross-platform tool for
    building repeatable, time-delayed, distributed security events. Easily
    create custom event chains for Blue Team drills and sensor / alert mapping.
    Red Teams can create decoy incidents, distractions, and lures to support and
    scale their operations. Turn paper tabletop exercises into controlled "live
    fire" range events. Build event sequences ("narratives") to simulate
    realistic scenarios and generate corresponding network and filesystem
    artifacts.

### Resources for VMs

* [Internet Explorer Windows XP and Vista Virtual Machines](https://github.com/mikescott/ie-virtual-machines/blob/master/README.md)

### VMs Designed to be Attacked

* [Vulnhub](https://www.Vulnhub.com)

  * Vulnhub is a website dedicated to cataloging various vulnerable VMs from
    across the web. It also has a healthy community that creates and submits new
    VMs on a regular basis. As I write this now, I believe there is around 100
    or so different VMs on Vulnhub, so you have a bit of variation.

* [iv-wrt](https://github.com/iv-wrt/iv-wrt)

  * An Intentionally Vulnerable Router Firmware Distribution

* [List of VMs that are preconfigured virtual machines](http://www.amanhardikar.com/mindmaps/PracticeUrls.html)
* [The Hacker Games - Hack the VM before it hacks you](http://www.scriptjunkie.us/2012/04/the-hacker-games/)

  * I have talked about counterattacks here before, and this system has
    implemented a number of aggressive anti-hacker measures. In fact, this VM is
    downright evil. I am probably legally obligated to tell you that it will try
    to hack you. So if a calculator or message declaring your pwnedness pops up
    or shows up on your desktop, you asked for it. But dont worry, it wont steal
    your docs or rm you, it will just demonstrate compromise for the game. To
    save precious bandwidth, this has been implemented in a minimal
    tinycore-based VM, and will require VirtualBox to run.

### Installing Active Directory

* [Install AD DS using Powerhsell](https://docs.microsoft.com/en-us/windows-server/identity/ad-ds/deploy/install-active-directory-domain-services--level-100-#BKMK_PS)

### Guides to setting up a Pen test lab:

* [Home Lab with pfSense & VMware Workstation - sysadmin perspective](http://itpro.outsidesys.com/2015/02/19/home-lab-with-pfsense-workstation/)

  * I wanted to build a virtual lab environment at home that would emulate an
    office environment. My requirements were to have separate network segments
    for Clients & Servers, and two DMZ networks. I also wanted my home network,
    which is external to the virtual lab environment, to emulate the Internet,
    even though it really isnt. The following is how I created multiple named
    LAN segments within VMware Workstation, and routed between them using a VM
    running pfSense, which is an open source firewall.

* [Setting Up a Pentest/Hacking Lab with Hyper-V](http://cyberthreathunt.com/2017/04/01/setting-up-a-pentest-lab-with-hyper-v/)
* [Windows Server 2016: Build a Windows Domain Lab at Home for Free](https://social.technet.microsoft.com/wiki/contents/articles/36438.windows-server-2016-build-a-windows-domain-lab-at-home-for-free.aspx#Download)

    * Microsoft Technet tutorial

* [Pentest Home Lab - 0x2 - Building Your AD Lab on Premises-SethSec](https://sethsec.blogspot.com/2017/06/pentest-home-lab-0x2-building-your-ad.html)
* [Building A Lab on AWS - 0x1 SethSec](https://sethsec.blogspot.com/2017/05/pentest-home-lab-0x1-building-your-ad.html)
* [Building an Effective Active Directory Lab Environment for Testing](https://adsecurity.org/?p=2653)
* [Hack Yourself: Building a Test Lab - David Boyd](https://www.youtube.com/watch?v=rgdX-hn0xXU)
* [Hack-Yourself: Building a pentesting lab for fun & profit](https://www.slideshare.net/DavidBoydCISSP/hack-yourself-building-a-pentesting-lab-for-fun-and-profit)
* [Setting up a Windows Lab Environment](http://thehackerplaybook.com/Windows_Domain.htm)
* [Setting Up A Penetration Testing Lab - Rapid7](https://kb.help.rapid7.com/docs/setting-up-a-penetration-testing-lab)
* [Building a Pentest Lab - stan.gr](http://www.stan.gr/2013/03/building-pentest-lab.html)
* [SANS Webcast: Building Your Own Super Duper Home Lab](https://www.youtube.com/watch?v=uzqwoufhwyk&app=desktop)
